$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});toastr.options={closeButton:false,debug:false,positionClass:"toast-top-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"2500",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};$(".bk_top").bind("click",function(b){var a=$(this);$("html, body").stop().animate({scrollTop:$(a.attr("href")).offset().top},1000,"easeInOutExpo");b.preventDefault()});$(window).scroll(function(a){if($(window).scrollTop()>50){$("body").addClass("show")}else{$("body").removeClass("show")}});addBinds();$(document.body).on("show.fa.modal",".fly-add",function(b,a){addBinds($(a))});$('input[name="contact_type"]').click(function(){$(this).tab("show")});if($(".product_tab_type").length>0){$(".product_tab_type").on("change",function(){var a=$(this).val();var b=$(this).closest(".product_info");var c=b.find(".product_tab_text");if(a==""){b.find(".tab_custom_text_group").addClass("hidden");c.val("")}else{b.find(".tab_custom_text_group").removeClass("hidden")}})}if($(".tab_text_select").length>0){$(".tab_text_select").on("change",function(){var a=$(this).val();var b=$(this).closest("td");var c=b.find(".tab_custom_text");if(a==""){b.find(".tab_custom_text_group").addClass("hidden");c.val("")}else{b.find(".tab_custom_text_group").removeClass("hidden")}})}});$(window).on("load",function(){equalheight(".eh");$.each($('input[name="contact_type"]'),function(a,b){if($(b).prop("checked")){$(b).tab("show")}})});$(window).resize(function(){equalheight(".eh")});equalheight=function(b){var a=0,c=0,f=new Array(),e,d=0;$(b).each(function(){e=$(this);$(e).height("auto");d=e.position().top;if(c!=d){for(currentDiv=0;currentDiv<f.length;currentDiv++){f[currentDiv].height(a)}f.length=0;c=d;a=e.height();f.push(e)}else{f.push(e);a=(a<e.height())?(e.height()):(a)}for(currentDiv=0;currentDiv<f.length;currentDiv++){f[currentDiv].height(a)}})};function removeItem(){var a=$(this).data("remove");var b=$(this).closest("tr");$.ajax({url:a,method:"DELETE",success:function(c){b.remove();toastr.success(c.message)}})}function addBinds(a){if(!a){a=$(document.body)}if(a.find(".btn-file").length>0){a.on("change",".btn-file :file",function(){var b=$(this),d=b.get(0).files?b.get(0).files.length:1,c=b.val().replace(/\\/g,"/").replace(/.*\//,"");b.trigger("fileselect",[d,c])});a.find(".btn-file :file").on("fileselect",function(e,f,c){var b=$(this).parents(".input-group").find(":text"),d=f>1?f+" files selected":c;if(b.length){b.val(d)}else{if(d){alert(d)}}})}if(a.find(".chosen-select").length>0){a.find(".chosen-select").chosen({width:"100%",allow_single_deselect:true})}if(a.find("[data-toggle=confirmation]").length>0){a.find("[data-toggle=confirmation]").confirmation({rootSelector:"[data-toggle=confirmation]",singleton:true,onConfirm:removeItem,container:"body"})}}function getTableRow(b,a){if(b.view_url){$.ajax({url:b.view_url,data:b,success:function(c){a.replaceWith(c);$(document.body).find(".fly-add").flyadd();addBinds()}})}}var addTableRow=function(b,a){var c=$("<tr></tr>");getTableRow(b,c);$(a).append(c)};var editTableRow=function(b,a){var c=$("<tr></tr>");getTableRow(b,c);$(a).replaceWith(c)};$(document.body).ready(function(){$(".add-to-cart").on("click",function(a){a.preventDefault();var b=$("#product");$.ajax({url:b.attr("action"),method:"POST",data:b.serialize(),success:function(c){toastr.success(c.message)},error:function(c){var d=c.responseJSON;$.each(d,function(e,f){toastr.error(f)})}})});$('input[name="choice"]').click(function(){$(this).tab("show")})});$(window).on("load",function(){$.each($('input[name="choice"]'),function(a,b){if($(b).prop("checked")){$(b).tab("show")}})});(function($){var defaultOptions={destination:"",dataForm:"form",submitHandler:"input[type=submit]",uploadFile:null,onLoad:function(){}};var flyAdd=function(element,options){this.$element=$(element);this.$modal=$('<div class="modal fade fly-add-modal" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"></div></div></div></div>');this.$onProcess;this.$parent_modal;this.build(options)};flyAdd.prototype={constructor:flyAdd,build:function(options){var self=this;self.$options=$.extend({},defaultOptions,options,self.$element.data());self.$parent_modal=self.$element.closest("div.modal");var e=$.Event("init.fa.modal");self.$element.trigger(e,self.$modal);self.$element.on("click",$.proxy(function(event){event.preventDefault();if(self.$element.data("source")&&self.$element.data("source")!==self.$options.source){self.$options.source=self.$element.data("source")}else{if(!self.$element.data("source")){self.$options.source="";return}}if(self.$parent_modal.length>0){self.$parent_modal.modal("hide")}self.load()}));self.$modal.on("shown.bs.modal",function(e){self.$onProcess=true;if(self.$parent_modal.length>0){$(document.body).addClass("modal-open")}var e=$.Event("show.fa.modal");self.$element.trigger(e,self.$modal)});self.$modal.on("hidden.bs.modal",function(){if(self.$parent_modal.length>0){self.$parent_modal.modal("show")}self.$onProcess=false;var e=$.Event("hide.fa.modal");self.$element.trigger(e,self.$modal)});self.$modal.on("click",self.$options.submitHandler,$.proxy(function(event){if(event){event.preventDefault()}event=$.Event("handler.fa.click");self.$element.trigger(event,[this,self.$modal]);if(self.$onProcess){self.save(this)}}))},load:function(){var self=this;if(self.$options.source){self.$modal.find(".modal-body").load(self.$options.source,$.proxy(function(){this.$element.trigger("load.fa.modal",this.$modal);this.$options.onLoad(this.$modal);this.$modal.find("input[data-role=fly-add], button[data-role=fly-add], a[data-role=fly-add]").flyadd();if(self.$options.destination==""&&self.$options.dataForm=="form"){self.$options.destination=self.$modal.find("form").attr("action")}},self));self.$modal.modal("show")}},save:function(handler){var self=this;var $dataForm=self.$modal.find(self.$options.dataForm);var $url=self.$options.destination;var $data=$dataForm.serialize();if(self.$options.uploadFile===null){var $processData=true,$data=$dataForm.serialize()}else{var $processData=false,$data=new FormData();$.each($dataForm.serializeArray(),function(i,field){$data.append(field.name,field.value)});$.each($dataForm.find(self.$options.uploadFile),function(i,field){if($(field).prop("files")[0]){$data.append(field.name,$(field).prop("files")[0])}})}self.$modal.find("div.has-error").removeClass("has-error");self.$modal.find("small.help-block").remove();if($url){$.ajax({url:$url,method:"POST",data:$data,dataType:"json",processData:$processData,contentType:$processData?"application/x-www-form-urlencoded; charset=UTF-8":false,success:function(data){self.$element.trigger("success.fa.submit",[data,self.$modal,self.$options]);if(self.$options.onSuccess&&self.$options.target!=""){var handler=$(document.body).find(self.$options.target);eval(self.$options.onSuccess+"(data, handler)")}self.$element.trigger("after.fa.submit",[handler,self.$modal]);self.$modal.modal("hide")},error:function(data){self.$element.trigger("error.fa.submit",[data,self.$modal,self.$options]);var errors=data.responseJSON;$.each(errors,function(key,value){var $element=self.$modal.find('[name="'+key+'"]');$element.closest("div").addClass("has-error").append('<small class="help-block">'+value+"</small>")});self.$element.trigger("after.fa.submit",[handler,self.$modal])}})}}};$.fn.flyadd=function(option){return this.each(function(){var $this=$(this);var data=$this.data("flyadd");var options=$.extend({},defaultOptions,$this.data(),option);if(!data){$this.data("flyadd",(data=new flyAdd(this,options)))}})};$.fn.flyadd.Constructor=flyAdd;$(function(){$("input[data-role=fly-add], button[data-role=fly-add], a[data-role=fly-add]").flyadd()})})(window.jQuery);$(document.body).ready(function(){$(document.body).on("click",".items-list #item-add",function(c){c.preventDefault();var b=$(".items-list tbody tr").length;var d=0;if(b>1){d=$(".items-list tbody tr:eq(-2)").data("id")+1}var a=$($("#prototype tbody").html().replace(/_id_/g,d));a.find("select").addClass("chosen-select");addBinds(a);$(".items-list tbody").find("tr:last").before(a)});$(document.body).on("click",".items-list .item-remove",function(a){a.preventDefault();var b=$(this).closest("tr");b.remove()});$(document.body).on("change",".items-list .product_id",function(){var c=$(this).closest("tr");var b=c.find(".colour_id").first();var a=c.find(".size_id").first();if(!$(this).val()){updateSelect(b,{});updateSelect(a,{});return}$.ajax({url:$(this).data("url")+"/"+$(this).val(),method:"GET",success:function(d){updateSelect(b,d.colours);var e={};$.each(d.variants,function(f,g){e[g.size.id]=g.size});updateSelect(a,e)}})})});function updateSelect(a,b){a.html("");a.trigger("chosen:updated");$.each(b,function(c,d){a.append('<option value="'+d.id+'">'+d.name+"</option>")});a.trigger("chosen:updated")}$(document).ready(function(){$(".slider-nav").slick({slidesToShow:4,slidesToScroll:1,infinite:true,dots:false,arrows:true,focusOnSelect:true});$(".slick-current").addClass("active");$(".slick-slide").click(function(a){$(this).addClass("active");$(this).siblings().removeClass("active")});$(".product-photos .remove-item").click(function(d){d.preventDefault();var c=$(this).closest(".photo-item");var b=c.index(".photo-item");var a=$(this).data("remove-url");$.ajax({url:a,method:"DELETE",success:function(e){location.reload()}})})});function addProductPhoto(b,a){location.reload()}var itemPosition;$(document).ready(function(){if($(".table-sortable").length>0){$(".table-sortable").sortable({items:"tbody > tr",stop:function(a,b){itemSortableStopCallback(this)}})}$(".sortable-action .save").on("click",function(a){a.preventDefault();$.ajax({method:"POST",data:$("#sortable-form").serialize(),success:function(b){var c=$(".sortable-action");if(c.hasClass("active")){c.removeClass("active")}toastr.success(b.message)}})})});function itemSortableStopCallback(a){$element=$(a);var b=$element.find(".sortable-action");if(!b.hasClass("active")){b.addClass("active")}$element.find("tbody > tr").each(function(d){console.log($(this));var c=d+1;$(this).find(".item-sort_order").first().val(c);$(this).find(".position").html(c)})};